<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Photo Upload App</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fafafa;
      margin: 0;
      padding: 0;
      max-width: 480px;
      margin: auto;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 24px 0 12px 0;
      background: #2196f3;
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 2;
    }
    .header button {
      background: none;
      border: none;
      cursor: pointer;
      outline: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0;
    }
    .camera-icon {
      font-size: 80px;
      user-select: none;
      transition: background 0.2s;
      border-radius: 50%;
      background: rgba(255,255,255,0.12);
      padding: 20px;
    }
    .header button:active .camera-icon {
      background: rgba(255,255,255,0.32);
    }
    .header-label {
      font-size:0.95em;
      margin-top:6px;
      color: #fff;
    }
    .thumbnails {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 10px 16px 0 16px;
    }
    .thumb-img {
      width: 64px;
      height: 64px;
      border-radius: 8px;
      object-fit: cover;
      background: #eee;
      border: 2px solid #2196f3;
      margin-bottom: 2px;
      display: block;
      cursor: pointer;
      transition: box-shadow 0.2s;
    }
    .thumb-img:hover {
      box-shadow: 0 0 0 4px #2196f333;
    }
    .thumb-container {
      position: relative;
      display: inline-block;
    }
    .remove-thumb {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #fff;
      border-radius: 50%;
      color: #f44336;
      font-size: 18px;
      border: 1px solid #f44336;
      cursor: pointer;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1;
    }
    .form-section {
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .form-section input[type='text'],
    .form-section input[type='tel'] {
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 16px;
    }
    .form-section button {
      background: #2196f3;
      color: #fff;
      border: none;
      padding: 12px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
    }
    .item-list {
      list-style: none;
      margin: 0;
      padding: 0 16px 16px 16px;
    }
    .item {
      background: #fff;
      border-radius: 8px;
      margin-bottom: 10px;
      padding: 10px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
      flex-wrap: wrap;
    }
    .item-images {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-right: 4px;
      margin-bottom: 4px;
    }
    .item-images img {
      width: 48px;
      height: 48px;
      border-radius: 4px;
      object-fit: cover;
      background: #eee;
      border: 1.5px solid #2196f3;
      cursor: pointer;
      transition: box-shadow 0.2s;
    }
    .item-images img:hover {
      box-shadow: 0 0 0 4px #2196f333;
    }
    .item-info {
      flex: 1;
      min-width: 120px;
    }
    .item-title {
      font-weight: bold;
      font-size: 1.05em;
      margin-bottom: 2px;
    }
    .item-phone {
      color: #388e3c;
      display: flex;
      align-items: center;
      font-size: 0.96em;
      gap: 2px;
    }
    /* Popup styles */
    .popup-backdrop {
      position: fixed;
      z-index: 20;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(30,30,30,0.75);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.2s;
    }
    .popup-img-container {
      position: relative;
      background: #fff;
      border-radius: 12px;
      padding: 6px;
      max-width: 95vw;
      max-height: 80vh;
      box-shadow: 0 6px 32px 4px #0004;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .popup-img {
      max-width: 90vw;
      max-height: 75vh;
      border-radius: 10px;
      display: block;
      background: #eee;
    }
    .popup-close {
      position: absolute;
      top: 8px;
      right: 8px;
      background: #fff;
      border-radius: 50%;
      color: #f44336;
      font-size: 32px;
      border: 2px solid #f44336;
      cursor: pointer;
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 30;
      box-shadow: 0 1px 8px 0 #0001;
    }
    @keyframes fadeIn {
      from { opacity: 0 }
      to { opacity: 1 }
    }
    @media (max-width: 400px) {
      .form-section, .item-list {
        padding-left: 8px;
        padding-right: 8px;
      }
      .thumbnails {
        padding-left: 8px;
        padding-right: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <button id="take-photo-btn" type="button">
      <span class="material-icons camera-icon">photo_camera</span>
      <span class="header-label">Take Photo</span>
    </button>
    <input id="take-photo-input" type="file" accept="image/*" capture="environment" style="display:none;">
    <button id="upload-photos-btn" type="button">
      <span class="material-icons camera-icon">collections</span>
      <span class="header-label">Upload</span>
    </button>
    <input id="upload-photos-input" type="file" accept="image/*" multiple style="display:none;">
  </div>
  <div class="thumbnails" id="thumbnails"></div>
  <form class="form-section" id="item-form" autocomplete="off">
    <input type="text" id="title" placeholder="Title" required maxlength="40">
    <input type="tel" id="phone" placeholder="WhatsApp Phone Number" required pattern="^\+?\d{10,15}$">
    <button type="submit">
      <span class="material-icons">add_circle</span>
      Add Item
    </button>
  </form>
  <ul class="item-list" id="item-list"></ul>
  <!-- Popup for zoomed photo -->
  <div id="popup-backdrop" class="popup-backdrop" style="display:none;">
    <div class="popup-img-container">
      <img id="popup-img" class="popup-img" src="" alt="Zoomed Photo">
      <span id="popup-close" class="material-icons popup-close" title="Close">close</span>
    </div>
  </div>
  <script>
    let photoDataList = [];

    const takePhotoBtn = document.getElementById('take-photo-btn');
    const takePhotoInput = document.getElementById('take-photo-input');
    const uploadPhotosBtn = document.getElementById('upload-photos-btn');
    const uploadPhotosInput = document.getElementById('upload-photos-input');
    const thumbnails = document.getElementById('thumbnails');
    const itemForm = document.getElementById('item-form');
    const itemList = document.getElementById('item-list');
    const titleInput = document.getElementById('title');
    const phoneInput = document.getElementById('phone');
    const popupBackdrop = document.getElementById('popup-backdrop');
    const popupImg = document.getElementById('popup-img');
    const popupClose = document.getElementById('popup-close');

    // Open camera (single photo)
    takePhotoBtn.onclick = () => takePhotoInput.click();
    takePhotoInput.onchange = (e) => {
      if (e.target.files && e.target.files[0]) {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = function(evt) {
          photoDataList.push(evt.target.result);
          renderThumbnails();
        };
        reader.readAsDataURL(file);
      }
      takePhotoInput.value = '';
    };

    // Upload from gallery (multiple photos)
    uploadPhotosBtn.onclick = () => uploadPhotosInput.click();
    uploadPhotosInput.onchange = (e) => {
      const files = Array.from(e.target.files || []);
      files.forEach(file => {
        const reader = new FileReader();
        reader.onload = function(evt) {
          photoDataList.push(evt.target.result);
          renderThumbnails();
        };
        reader.readAsDataURL(file);
      });
      uploadPhotosInput.value = '';
    };

    // Thumbnails
    function renderThumbnails() {
      thumbnails.innerHTML = '';
      photoDataList.forEach((data, idx) => {
        const cont = document.createElement('div');
        cont.className = 'thumb-container';
        const img = document.createElement('img');
        img.src = data;
        img.className = 'thumb-img';
        img.alt = 'Photo';
        img.onclick = () => openPopup(data);
        const rm = document.createElement('span');
        rm.className = 'material-icons remove-thumb';
        rm.textContent = 'close';
        rm.title = 'Remove photo';
        rm.onclick = (ev) => {
          ev.stopPropagation();
          photoDataList.splice(idx, 1);
          renderThumbnails();
        };
        cont.appendChild(img);
        cont.appendChild(rm);
        thumbnails.appendChild(cont);
      });
    }

    // Add item form
    itemForm.onsubmit = function(e) {
      e.preventDefault();
      if (!photoDataList.length) {
        alert('Please take or upload at least one photo.');
        return;
      }
      const title = titleInput.value.trim();
      const phone = phoneInput.value.trim();
      if (!title || !phone) return;

      const li = document.createElement('li');
      li.className = 'item';

      const imagesDiv = document.createElement('div');
      imagesDiv.className = 'item-images';
      photoDataList.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = title;
        img.onclick = () => openPopup(src);
        imagesDiv.appendChild(img);
      });

      const infoDiv = document.createElement('div');
      infoDiv.className = 'item-info';

      const titleDiv = document.createElement('div');
      titleDiv.className = 'item-title';
      titleDiv.textContent = title;

      const phoneDiv = document.createElement('div');
      phoneDiv.className = 'item-phone';
      phoneDiv.innerHTML = `<span class="material-icons" style="font-size:1.1em;vertical-align:middle;">whatsapp</span> ${phone}`;

      infoDiv.appendChild(titleDiv);
      infoDiv.appendChild(phoneDiv);

      li.appendChild(imagesDiv);
      li.appendChild(infoDiv);

      itemList.prepend(li);

      // Reset
      photoDataList = [];
      renderThumbnails();
      titleInput.value = '';
      phoneInput.value = '';
    };

    // Popup zoom
    function openPopup(imgSrc) {
      popupImg.src = imgSrc;
      popupBackdrop.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }
    function closePopup() {
      popupImg.src = '';
      popupBackdrop.style.display = 'none';
      document.body.style.overflow = '';
    }
    popupClose.onclick = closePopup;
    popupBackdrop.onclick = function(e) {
      if (e.target === popupBackdrop) closePopup();
    };
  </script>
</body>
</html>
