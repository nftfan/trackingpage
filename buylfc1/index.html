<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Buy LFC Credits â€“ LeuvenFlyers</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: #f8fafc;
            color: #222;
            margin: 0;
            padding: 0;
        }
        header {
            background: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            display: flex;
            align-items: center;
            padding: 20px 40px;
            justify-content: space-between;
        }
        .logo-link {
            display: flex;
            align-items: center;
            text-decoration: none;
        }
        .logo-link img {
            height: 56px;
            margin-right: 12px;
        }
        .logo-link span {
            font-size: 2rem;
            font-weight: 700;
            color: #0069d9;
            letter-spacing: 1px;
        }
        main {
            max-width: 1100px;
            margin: 40px auto 0 auto;
            padding: 0 16px;
        }
        .intro {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.06);
            padding: 32px;
            margin-bottom: 36px;
            text-align: center;
        }
        .intro h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: #0069d9;
        }
        .intro p {
            font-size: 1.15rem;
            color: #333;
            margin-bottom: 8px;
        }
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 28px;
            gap: 10px;
            flex-wrap: wrap;
        }
        .tab-btn {
            padding: 10px 30px;
            border: none;
            background: #e9f2ff;
            font-size: 1.07rem;
            color: #0069d9;
            font-weight: 600;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            margin-right: 3px;
            transition: background 0.18s, color 0.18s;
        }
        .tab-btn.active {
            background: #fff;
            color: #222;
            border-bottom: 2px solid #0069d9;
            font-weight: 700;
        }
        .flex-main-row {
            display: flex;
            align-items: flex-start;
            gap: 32px;
        }
        .main-content {
            flex: 2 1 0;
        }
        .sidebar {
            flex: 1 1 280px;
            max-width: 360px;
            min-width: 260px;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.06);
            padding: 28px 20px 18px 20px;
            margin-top: 8px;
            margin-bottom: 48px;
            position: sticky;
            top: 24px;
            height: fit-content;
        }
        .sidebar h3 {
            color: #0069d9;
            font-weight: 700;
            margin-top: 0;
            margin-bottom: 18px;
            font-size: 1.19rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .sidebar .eur-input-label {
            font-weight: 600;
            margin-bottom: 4px;
            color: #222;
        }
        .sidebar .eur-input-wrap {
            margin-bottom: 8px;
        }
        .sidebar input[type="number"] {
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid #bbb;
            font-size: 1.13rem;
            width: 140px;
            text-align: center;
            margin-right: 8px;
        }
        .sidebar .eur-lfc-info {
            font-size: 1.05rem;
            font-weight: 500;
            color: #0069d9;
            margin-bottom: 10px;
            min-height: 26px;
        }
        @media (max-width:1100px) {
            main {
                max-width: 99vw;
            }
            .flex-main-row {
                flex-direction: column;
                gap: 0;
            }
            .sidebar {
                margin: 24px auto 0 auto;
                max-width: 420px;
                width: 95vw;
                position: static;
            }
        }
        .packages-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 32px;
            justify-content: center;
            margin-bottom: 48px;
        }
        .package-card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 6px 28px rgba(0,0,0,0.07);
            flex: 1 1 260px;
            max-width: 320px;
            min-width: 260px;
            padding: 32px 22px 28px 22px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: box-shadow .2s, border .18s;
            position: relative;
            border: 2px solid transparent;
        }
        .package-card.selected {
            border: 2px solid #0069d9;
            box-shadow: 0 8px 36px rgba(0,105,217,0.18);
        }
        .package-card:hover {
            box-shadow: 0 8px 36px rgba(0,105,217,0.15);
        }
        .package-icon {
            font-size: 3.3rem;
            color: #0069d9;
            margin-bottom: 10px;
        }
        .package-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 4px 0 12px 0;
            color: #0069d9;
            text-transform: uppercase;
            letter-spacing: .5px;
        }
        .lfc-amount {
            font-size: 2.1rem;
            font-weight: 700;
            color: #222;
            margin-bottom: 8px;
        }
        .price {
            font-size: 1.35rem;
            color: #43a047;
            font-weight: 700;
            margin-bottom: 16px;
        }
        .dynamic-price {
            font-size: 1.25rem;
            color: #43a047;
            font-weight: 700;
            margin-bottom: 8px;
            margin-top: 6px;
            min-height: 26px;
        }
        .features {
            margin-bottom: 18px;
            text-align: left;
            width: 100%;
        }
        .features li {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 1rem;
        }
        .features .material-icons {
            color: #43a047;
            font-size: 1.1rem;
            margin-right: 7px;
        }
        .custom-package-card {
            border: 2px dashed #0069d9;
            background: #e9f2ff;
        }
        .custom-package-card.selected {
            border: 2px solid #0069d9;
        }
        .custom-input-container {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .custom-input-container label {
            font-size: 0.98rem;
            margin-bottom: 3px;
            color: #222;
        }
        .custom-input-container input[type="number"] {
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid #bbb;
            font-size: 1.13rem;
            width: 110px;
            text-align: center;
            margin-bottom: 6px;
        }
        .custom-error {
            color: #c62828;
            font-size: 0.95rem;
            min-height: 18px;
            margin-bottom: 4px;
        }
        .tab-content {
            display: none;
            animation: fadeInUp 0.22s;
        }
        .tab-content.active {
            display: flex;
        }
        @media (max-width:900px) {
            .packages-grid {
                flex-direction: column;
                align-items: center;
            }
            .package-card {
                max-width: 420px;
                width: 90vw;
            }
            .tab-content.active {
                flex-direction: column;
            }
        }

        /* Tip Only card */
        .tip-card .tip-stars-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0 6px 0;
        }
        .tip-card .tip-btn {
            border: 1px solid #bbb;
            background: #f5f7fb;
            color: #0069d9;
            border-radius: 6px;
            padding: 4px 10px;
            font-size: 1.1rem;
            cursor: pointer;
        }
        .tip-card .tip-input {
            width: 100px;
            text-align: center;
            padding: 6px 10px;
            border: 1px solid #bbb;
            border-radius: 6px;
            font-size: 1.1rem;
        }
        .tip-card .tip-note {
            font-size: 0.98rem;
            color: #444;
            margin-bottom: 6px;
        }
        .tip-card .tip-total {
            font-size: 1.15rem;
            color: #43a047;
            font-weight: 700;
            min-height: 26px;
        }
    </style>
    <script 
      src="https://www.paypal.com/sdk/js?client-id=BAA4no69vJReWGVH4pxdduEcLTOw_OMcRd7XTBXWymZbvFN_L4NzuyYOCEMxTIeu5WW6pdRt-f7MFjgKLg&components=hosted-buttons&disable-funding=venmo&currency=EUR">
    </script>
</head>
<body>
    <header>
        <a href="https://leuvenflyers.com" class="logo-link" target="_blank" rel="noopener">
            <img src="https://res.cloudinary.com/de3kzkvhd/image/upload/v1749533761/4HirECt_srdsx7.png" alt="LeuvenFlyers Logo">
            <span>LeuvenFlyers</span>
        </a>
        <span style="font-size:1.13rem;color:#0069d9;font-weight:500;">LFC Credits</span>
    </header>

    <main>
        <section class="intro">
            <h1>
                <span class="material-icons" style="vertical-align: bottom;font-size:2.3rem;color:#43a047;">local_atm</span>
                Buy LFC Credits for Flyer Printing &amp; Distribution
            </h1>
            <p>
                <strong>LFC</strong> stands for <strong>LeuvenFlyers Credit</strong>.
                <br>
                <span style="color:#0069d9;">1 LFC = 1 flyer/distribution in Belgium! Select your service below.</span>
            </p>
        </section>

        <div class="tabs">
            <button class="tab-btn active" data-tab="distribution">Distribution Only</button>
            <button class="tab-btn" data-tab="a5">A5 Flyers</button>
            <button class="tab-btn" data-tab="a6">A6 Flyers</button>
            <button class="tab-btn" data-tab="tip">
                <span class="material-icons" style="vertical-align:middle;font-size:1.15rem;color:#ffb300;">grade</span>
                Tip Distributor
            </button>
        </div>

        <div class="flex-main-row">
            <div class="main-content">
                <!-- Distribution Only Tab -->
                <div class="tab-content active" id="tab-distribution">
                    <div class="packages-grid">
                        <div class="package-card" data-amount="125.00" data-price-per="0.05" data-package="Starter" data-lfc="2500" data-tab="distribution">
                            <span class="material-icons package-icon">rocket_launch</span>
                            <div class="package-title">Starter</div>
                            <div class="lfc-amount">2,500&nbsp;LFC</div>
                            <div class="price">â‚¬125.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>Distribution of your supplied flyers</li>
                                <li><span class="material-icons">check</span>2,500 addresses</li>
                                <li><span class="material-icons">check</span>Anywhere in Belgium</li>
                                <li><span class="material-icons">local_shipping</span>Distribution only</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-distribution" />
                            </div>
                        </div>
                        <div class="package-card" data-amount="500.00" data-price-per="0.05" data-package="Medium" data-lfc="10000" data-tab="distribution">
                            <span class="material-icons package-icon">local_fire_department</span>
                            <div class="package-title">Medium</div>
                            <div class="lfc-amount">10,000&nbsp;LFC</div>
                            <div class="price">â‚¬500.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>Distribution of your supplied flyers</li>
                                <li><span class="material-icons">check</span>10,000 addresses</li>
                                <li><span class="material-icons">check</span>Anywhere in Belgium</li>
                                <li><span class="material-icons">star</span>Best Value!</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-distribution" />
                            </div>
                        </div>
                        <div class="package-card" data-amount="1250.00" data-price-per="0.05" data-package="Large" data-lfc="25000" data-tab="distribution">
                            <span class="material-icons package-icon">military_tech</span>
                            <div class="package-title">Large</div>
                            <div class="lfc-amount">25,000&nbsp;LFC</div>
                            <div class="price">â‚¬1,250.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>Distribution of your supplied flyers</li>
                                <li><span class="material-icons">check</span>25,000 addresses</li>
                                <li><span class="material-icons">check</span>Anywhere in Belgium</li>
                                <li><span class="material-icons" style="color:#ffb300;">workspace_premium</span>For large campaigns</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-distribution" />
                            </div>
                        </div>
                        <div class="package-card custom-package-card" data-amount="0.00" data-price-per="0.05" data-package="Custom" data-lfc="custom" data-tab="distribution">
                            <span class="material-icons package-icon">edit</span>
                            <div class="package-title">Custom</div>
                            <div class="lfc-amount">Your Choice</div>
                            <div class="price">â‚¬0.05 / LFC</div>
                            <ul class="features">
                                <li><span class="material-icons">tune</span>Choose any amount (min 15)</li>
                                <li><span class="material-icons">check</span>Distribution only</li>
                                <li><span class="material-icons">check</span>Anywhere in Belgium</li>
                                <li><span class="material-icons">support_agent</span>Personalized support</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-distribution" />
                            </div>
                            <div class="custom-input-container">
                                <label for="custom-lfc-input-distribution">Enter LFC amount <span style="font-size:0.93em">(min 15)</span>:</label>
                                <input id="custom-lfc-input-distribution" type="number" min="15" step="1" value="15" />
                                <div class="custom-error" id="custom-lfc-error-distribution"></div>
                                <div class="dynamic-price" id="custom-lfc-price-distribution"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- A5 Flyers Tab -->
                <div class="tab-content" id="tab-a5">
                    <div class="packages-grid">
                        <div class="package-card" data-amount="225.00" data-price-per="0.09" data-package="Starter" data-lfc="2500" data-tab="a5">
                            <span class="material-icons package-icon">rocket_launch</span>
                            <div class="package-title">Starter</div>
                            <div class="lfc-amount">2,500&nbsp;LFC</div>
                            <div class="price">â‚¬225.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>2,500 premium A5 flyers</li>
                                <li><span class="material-icons">check</span>Double-sided, quality paper</li>
                                <li><span class="material-icons">check</span>Distribution anywhere in Belgium</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-a5" />
                            </div>
                        </div>
                        <div class="package-card" data-amount="900.00" data-price-per="0.09" data-package="Medium" data-lfc="10000" data-tab="a5">
                            <span class="material-icons package-icon">local_fire_department</span>
                            <div class="package-title">Medium</div>
                            <div class="lfc-amount">10,000&nbsp;LFC</div>
                            <div class="price">â‚¬900.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>10,000 premium A5 flyers</li>
                                <li><span class="material-icons">check</span>Double-sided, quality paper</li>
                                <li><span class="material-icons">check</span>Distribution anywhere in Belgium</li>
                                <li><span class="material-icons">star</span>Best Value!</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-a5" />
                            </div>
                        </div>
                        <div class="package-card" data-amount="2250.00" data-price-per="0.09" data-package="Large" data-lfc="25000" data-tab="a5">
                            <span class="material-icons package-icon">military_tech</span>
                            <div class="package-title">Large</div>
                            <div class="lfc-amount">25,000&nbsp;LFC</div>
                            <div class="price">â‚¬2,250.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>25,000 premium A5 flyers</li>
                                <li><span class="material-icons">check</span>Double-sided, quality paper</li>
                                <li><span class="material-icons">check</span>Distribution anywhere in Belgium</li>
                                <li><span class="material-icons" style="color:#ffb300;">workspace_premium</span>For large campaigns</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-a5" />
                            </div>
                        </div>
                        <div class="package-card custom-package-card" data-amount="0.00" data-price-per="0.09" data-package="Custom" data-lfc="custom" data-tab="a5">
                            <span class="material-icons package-icon">edit</span>
                            <div class="package-title">Custom</div>
                            <div class="lfc-amount">Your Choice</div>
                            <div class="price">â‚¬0.09 / LFC</div>
                            <ul class="features">
                                <li><span class="material-icons">tune</span>Choose any amount (min 15)</li>
                                <li><span class="material-icons">check</span>A5, premium double-sided</li>
                                <li><span class="material-icons">check</span>Distribution anywhere in Belgium</li>
                                <li><span class="material-icons">support_agent</span>Personalized support</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-a5" />
                            </div>
                            <div class="custom-input-container">
                                <label for="custom-lfc-input-a5">Enter LFC amount <span style="font-size:0.93em">(min 15)</span>:</label>
                                <input id="custom-lfc-input-a5" type="number" min="15" step="1" value="15" />
                                <div class="custom-error" id="custom-lfc-error-a5"></div>
                                <div class="dynamic-price" id="custom-lfc-price-a5"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- A6 Flyers Tab -->
                <div class="tab-content" id="tab-a6">
                    <div class="packages-grid">
                        <div class="package-card" data-amount="200.00" data-price-per="0.08" data-package="Starter" data-lfc="2500" data-tab="a6">
                            <span class="material-icons package-icon">rocket_launch</span>
                            <div class="package-title">Starter</div>
                            <div class="lfc-amount">2,500&nbsp;LFC</div>
                            <div class="price">â‚¬200.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>2,500 premium A6 flyers</li>
                                <li><span class="material-icons">check</span>Double-sided, quality paper</li>
                                <li><span class="material-icons">check</span>Distribution anywhere in Belgium</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-a6" />
                            </div>
                        </div>
                        <div class="package-card" data-amount="800.00" data-price-per="0.08" data-package="Medium" data-lfc="10000" data-tab="a6">
                            <span class="material-icons package-icon">local_fire_department</span>
                            <div class="package-title">Medium</div>
                            <div class="lfc-amount">10,000&nbsp;LFC</div>
                            <div class="price">â‚¬800.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>10,000 premium A6 flyers</li>
                                <li><span class="material-icons">check</span>Double-sided, quality paper</li>
                                <li><span class="material-icons">check</span>Distribution anywhere in Belgium</li>
                                <li><span class="material-icons">star</span>Best Value!</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-a6" />
                            </div>
                        </div>
                        <div class="package-card" data-amount="2000.00" data-price-per="0.08" data-package="Large" data-lfc="25000" data-tab="a6">
                            <span class="material-icons package-icon">military_tech</span>
                            <div class="package-title">Large</div>
                            <div class="lfc-amount">25,000&nbsp;LFC</div>
                            <div class="price">â‚¬2,000.00</div>
                            <ul class="features">
                                <li><span class="material-icons">check</span>25,000 premium A6 flyers</li>
                                <li><span class="material-icons">check</span>Double-sided, quality paper</li>
                                <li><span class="material-icons">check</span>Distribution anywhere in Belgium</li>
                                <li><span class="material-icons" style="color:#ffb300;">workspace_premium</span>For large campaigns</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-a6" />
                            </div>
                        </div>
                        <div class="package-card custom-package-card" data-amount="0.00" data-price-per="0.08" data-package="Custom" data-lfc="custom" data-tab="a6">
                            <span class="material-icons package-icon">edit</span>
                            <div class="package-title">Custom</div>
                            <div class="lfc-amount">Your Choice</div>
                            <div class="price">â‚¬0.08 / LFC</div>
                            <ul class="features">
                                <li><span class="material-icons">tune</span>Choose any amount (min 15)</li>
                                <li><span class="material-icons">check</span>A6, premium double-sided</li>
                                <li><span class="material-icons">check</span>Distribution anywhere in Belgium</li>
                                <li><span class="material-icons">support_agent</span>Personalized support</li>
                            </ul>
                            <div class="select-radio">
                                <input type="radio" name="package-a6" />
                            </div>
                            <div class="custom-input-container">
                                <label for="custom-lfc-input-a6">Enter LFC amount <span style="font-size:0.93em">(min 15)</span>:</label>
                                <input id="custom-lfc-input-a6" type="number" min="15" step="1" value="15" />
                                <div class="custom-error" id="custom-lfc-error-a6"></div>
                                <div class="dynamic-price" id="custom-lfc-price-a6"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tip Only Tab -->
                <div class="tab-content" id="tab-tip">
                    <div class="packages-grid">
                        <div class="package-card tip-card" data-amount="0.00" data-package="Tip Only" data-lfc="tip-only" data-tab="tip">
                            <span class="material-icons package-icon" style="color:#ffb300;">grade</span>
                            <div class="package-title">Tip the Distributor</div>
                            <div class="price">1 Star = â‚¬5.00</div>
                            <ul class="features">
                                <li><span class="material-icons" style="color:#ffb300;">grade</span>Show appreciation to your distributor</li>
                                <li><span class="material-icons">check</span>Tip-only: No LFC credits included</li>
                                <li><span class="material-icons">public</span>Valid anywhere in Belgium</li>
                            </ul>

                            <div class="tip-stars-row">
                                <button type="button" class="tip-btn" id="tip-minus" aria-label="Decrease stars">âˆ’</button>
                                <input type="number" id="tip-stars" class="tip-input" min="1" step="1" value="1" />
                                <button type="button" class="tip-btn" id="tip-plus" aria-label="Increase stars">+</button>
                            </div>
                            <div class="tip-note">
                                <span class="material-icons" style="font-size:1.05rem;vertical-align:middle;color:#ffb300;">grade</span>
                                Choose as many stars as you want.
                            </div>
                            <div class="tip-total" id="tip-total">Total tip: â‚¬5.00</div>

                            <div class="select-radio" style="margin-top:8px;">
                                <input type="radio" name="package-tip" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <aside class="sidebar">
                <h3>
                    <span class="material-icons" style="vertical-align:middle;">payments</span>
                    Pay securely via PayPal
                </h3>
                <div class="eur-input-label">Enter amount in EUR:</div>
                <div class="eur-input-wrap">
                    <input type="number" min="0.75" step="0.01" id="eur-input" value="125.00" />
                </div>
                <div class="eur-lfc-info" id="eur-lfc-info"></div>

                <div id="paypal-container-N6Y63TMLQUU38"></div>
                <script>
                  if(window.paypal && paypal.HostedButtons){
                    paypal.HostedButtons({
                        hostedButtonId: "N6Y63TMLQUU38",
                    }).render("#paypal-container-N6Y63TMLQUU38");
                  } else {
                    window.addEventListener("load", function() {
                        if(window.paypal && paypal.HostedButtons){
                            paypal.HostedButtons({
                                hostedButtonId: "N6Y63TMLQUU38",
                            }).render("#paypal-container-N6Y63TMLQUU38");
                        }
                    });
                  }
                </script>
                <div style="margin-top:18px;font-size:0.95em;color:#222;">
                    <strong>Note:</strong> Select your package or the Tip Only tab, then pay with PayPal.<br>
                    After payment, you will receive a PDF receipt by email.
                </div>
            </aside>
        </div>
    </main>

    <footer>
        &copy; 2025 LeuvenFlyers. All rights reserved.
    </footer>

    <script>
        // Pricing for each tab (LFC only)
        const TAB_PRICES = {
            distribution: 0.05,
            a5: 0.09,
            a6: 0.08
        };
        const TIP_PER_STAR = 5.00;

        function getActiveTabName() {
            return document.querySelector('.tab-btn.active').dataset.tab;
        }

        // Global state for selected package/tab
        let currentTab = getActiveTabName();
        let currentPackage = { 
            lfc: 2500,
            amount: (2500 * TAB_PRICES[currentTab]).toFixed(2), // base amount (EUR) for package (no tip concept now)
            pricePer: TAB_PRICES[currentTab],
            isCustom: false,
            tipOnly: false
        };

        // Tab switching logic
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Deactivate others
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                // Activate selected
                this.classList.add('active');
                const tabName = this.dataset.tab;
                const tabContent = document.getElementById('tab-' + tabName);
                if (tabContent) tabContent.classList.add('active');

                // Select first package in the new tab and update sidebar
                setTimeout(function() {
                    selectFirstPackageInActiveTab();
                    updateSidebarPricePer();
                }, 50);
            });
        });

        // Dynamic price display for custom LFC packages
        function updateCustomPrice(inputId, errorId, price, priceBoxId) {
            const elInput = document.getElementById(inputId);
            const elError = document.getElementById(errorId);
            const elPrice = document.getElementById(priceBoxId);

            function updatePriceDisplay() {
                let val = parseInt(elInput.value, 10);
                if (isNaN(val) || val < 15) {
                    elError.innerText = "Minimum is 15 LFC.";
                    elPrice.innerHTML = "";
                } else {
                    elError.innerText = "";
                    elPrice.innerHTML = "Total: <strong>â‚¬" + (val * price).toFixed(2) + "</strong>";
                }
            }
            elInput.addEventListener('input', updatePriceDisplay);
            updatePriceDisplay();
        }
        updateCustomPrice("custom-lfc-input-distribution", "custom-lfc-error-distribution", 0.05, "custom-lfc-price-distribution");
        updateCustomPrice("custom-lfc-input-a5", "custom-lfc-error-a5", 0.09, "custom-lfc-price-a5");
        updateCustomPrice("custom-lfc-input-a6", "custom-lfc-error-a6", 0.08, "custom-lfc-price-a6");

        // Sidebar Euro <-> LFC (and Tip Only handling)
        function updateSidebarEuroLfc() {
            const eurInput = document.getElementById("eur-input");
            const info = document.getElementById("eur-lfc-info");
            let val = parseFloat((eurInput.value || "0").toString().replace(",", "."));
            if (isNaN(val) || val < 0) val = 0;

            if (currentPackage.tipOnly) {
                // Keep tip stars synced with EUR (round to nearest star >= 1)
                const tipStarsEl = document.getElementById('tip-stars');
                if (tipStarsEl) {
                    let stars = Math.max(1, Math.round(val / TIP_PER_STAR));
                    tipStarsEl.value = stars;
                    updateTipTotalDisplay(); // will also refresh EUR to exact multiple of 5 and info
                }
                info.innerHTML = 'Tip-only: <strong>No LFC credits</strong>.';
                return;
            }

            // Regular LFC packages
            const pricePer = currentPackage.pricePer;
            const minBase = 15 * pricePer;

            if (val < minBase) {
                info.innerHTML = 'Minimum is <strong>â‚¬' + minBase.toFixed(2) + '</strong> (15 LFC).';
                return;
            }

            let lfc = Math.floor(val / pricePer);
            if (lfc < 15) lfc = 15;
            info.innerHTML = 'You get <strong>' + lfc.toLocaleString() + '&nbsp;LFC</strong> for â‚¬' + val.toFixed(2) + '.';
        }
        document.getElementById("eur-input").addEventListener("input", updateSidebarEuroLfc);

        // Package selection logic
        function deselectAllCards(cards) {
            cards.forEach(card => card.classList.remove('selected'));
        }
        function selectFirstPackageInActiveTab() {
            currentTab = getActiveTabName();
            const activeTab = document.getElementById('tab-' + currentTab);
            if (!activeTab) return;
            let radios = activeTab.querySelectorAll('.select-radio input[type="radio"]');
            if (radios.length > 0) {
                radios[0].checked = true;
                radios[0].dispatchEvent(new Event('change', {bubbles:true}));
            }
        }

        function updatePaypalAndHighlight(card) {
            // Highlight
            let allCards = Array.from(card.parentElement.children);
            deselectAllCards(allCards);
            card.classList.add('selected');

            const eurInput = document.getElementById("eur-input");

            // If Tip Only card
            if (card.getAttribute('data-lfc') === 'tip-only') {
                currentPackage.tipOnly = true;
                currentPackage.isCustom = false;
                currentPackage.pricePer = 0;
                currentPackage.lfc = 0;
                // Set EUR to current stars * 5
                const starsEl = document.getElementById('tip-stars');
                let stars = parseInt(starsEl.value, 10);
                if (isNaN(stars) || stars < 1) stars = 1;
                const total = stars * TIP_PER_STAR;
                eurInput.value = total.toFixed(2);
                eurInput.dispatchEvent(new Event('input'));
                return;
            }

            // Regular LFC package cards
            currentPackage.tipOnly = false;

            let tab = card.getAttribute('data-tab');
            let lfc = card.getAttribute('data-lfc');
            let amount = card.getAttribute('data-amount');
            let pricePer = parseFloat(card.getAttribute('data-price-per'));

            currentTab = tab;
            currentPackage.pricePer = pricePer;

            if (lfc === "custom") {
                let customInput = card.querySelector('input[type="number"]');
                let val = parseInt(customInput.value, 10);
                if (isNaN(val) || val < 15) val = 15;
                currentPackage.lfc = val;
                currentPackage.amount = (val * pricePer).toFixed(2);
                currentPackage.isCustom = true;
                document.getElementById("eur-input").value = currentPackage.amount;
            } else {
                currentPackage.lfc = parseInt(lfc, 10);
                currentPackage.amount = parseFloat(amount).toFixed(2);
                currentPackage.isCustom = false;
                document.getElementById("eur-input").value = currentPackage.amount;
            }
            document.getElementById("eur-input").dispatchEvent(new Event('input'));
        }

        function setupRadiosAndCards() {
            document.querySelectorAll('.tab-content').forEach(tabContent => {
                let cards = tabContent.querySelectorAll('.package-card');
                let radios = tabContent.querySelectorAll('.select-radio input[type="radio"]');
                radios.forEach((radio, idx) => {
                    radio.addEventListener('change', function() {
                        if (radio.checked) {
                            updatePaypalAndHighlight(cards[idx]);
                        }
                    });
                    // Allow clicking the card to select radio
                    cards[idx].addEventListener('click', function(e) {
                        if (!radio.checked) {
                            radio.checked = true;
                            radio.dispatchEvent(new Event('change', {bubbles:true}));
                        }
                    });
                });

                // Custom LFC card: update EUR on input if selected
                let customCard = tabContent.querySelector('.custom-package-card');
                if (customCard) {
                    let pricePer = parseFloat(customCard.getAttribute('data-price-per'));
                    let customInput = customCard.querySelector('input[type="number"]');
                    customInput.addEventListener('input', function() {
                        let lfc = parseInt(customInput.value, 10);
                        if (isNaN(lfc) || lfc < 15) lfc = 15;
                        if (customCard.classList.contains('selected')) {
                            currentPackage.pricePer = pricePer;
                            currentPackage.lfc = lfc;
                            currentPackage.amount = (lfc * pricePer).toFixed(2);
                            const eurInput = document.getElementById("eur-input");
                            eurInput.value = currentPackage.amount;
                            eurInput.dispatchEvent(new Event('input'));
                        }
                    });
                }
            });
        }
        setupRadiosAndCards();

        // Tip Only controls setup
        function updateTipTotalDisplay() {
            const starsEl = document.getElementById('tip-stars');
            const totalEl = document.getElementById('tip-total');
            if (!starsEl || !totalEl) return;

            let stars = parseInt(starsEl.value, 10);
            if (isNaN(stars) || stars < 1) stars = 1;
            starsEl.value = stars;

            const total = stars * TIP_PER_STAR;
            totalEl.textContent = 'Total tip: â‚¬' + total.toFixed(2);

            // If Tip tab card is selected, reflect to EUR input
            const tipCard = document.querySelector('#tab-tip .package-card.tip-card');
            const tipRadio = document.querySelector('#tab-tip .select-radio input[type="radio"]');
            if (tipCard && tipCard.classList.contains('selected')) {
                const eurInput = document.getElementById('eur-input');
                eurInput.value = total.toFixed(2);
                eurInput.dispatchEvent(new Event('input'));
            }
        }

        function setupTipOnlyControls() {
            const minusBtn = document.getElementById('tip-minus');
            const plusBtn = document.getElementById('tip-plus');
            const starsEl = document.getElementById('tip-stars');

            if (minusBtn && plusBtn && starsEl) {
                minusBtn.addEventListener('click', () => {
                    let v = parseInt(starsEl.value, 10);
                    if (isNaN(v)) v = 1;
                    starsEl.value = Math.max(1, v - 1);
                    updateTipTotalDisplay();
                });
                plusBtn.addEventListener('click', () => {
                    let v = parseInt(starsEl.value, 10);
                    if (isNaN(v)) v = 1;
                    starsEl.value = v + 1;
                    updateTipTotalDisplay();
                });
                starsEl.addEventListener('input', updateTipTotalDisplay);
            }
        }
        setupTipOnlyControls();

        // Update sidebar calculation when switching tab or package
        function updateSidebarPricePer() {
            document.getElementById("eur-input").dispatchEvent(new Event('input'));
        }

        // Auto-select first package on load and update sidebar
        window.addEventListener('DOMContentLoaded', function(){
            selectFirstPackageInActiveTab();
            updateSidebarPricePer();
            updateTipTotalDisplay();
        });
    </script>
</body>
</html>
